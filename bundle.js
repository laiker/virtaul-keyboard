(()=>{const e={line1:[{code:"Backquote",values:["ё","Ё","`","~"],type:"key"},{code:"Digit1",values:["1","!","1","!"],type:"key"},{code:"Digit2",values:["2","'","2","@"],type:"key"},{code:"Digit3",values:["3","№","3","#"],type:"key"},{code:"Digit4",values:["4",";","4","$"],type:"key"},{code:"Digit5",values:["5","%","5","%"],type:"key"},{code:"Digit6",values:["6",":","6","^"],type:"key"},{code:"Digit7",values:["7","?","7","&"],type:"key"},{code:"Digit8",values:["8","*","8","*"],type:"key"},{code:"Digit9",values:["9","(","9","("],type:"key"},{code:"Digit0",values:["0",")","0",")"],type:"key"},{code:"Minus",values:["-","_","-","_"],type:"key"},{code:"Equal",values:["=","+","=","+"],type:"key"},{code:"Backspace",values:["Backspace","Backspace","Backspace","Backspace"],type:"key backspace"}],line2:[{code:"Tab",values:["Tab","Tab","Tab","Tab"],type:"key tab"},{code:"KeyQ",values:["й","Й","q","Q"],type:"key"},{code:"KeyW",values:["ц","Ц","w","W"],type:"key"},{code:"KeyE",values:["у","У","e","E"],type:"key"},{code:"KeyR",values:["к","К","r","R"],type:"key"},{code:"KeyT",values:["е","Е","t","T"],type:"key"},{code:"KeyY",values:["н","Н","y","Y"],type:"key"},{code:"KeyU",values:["г","Г","u","U"],type:"key"},{code:"KeyI",values:["ш","Ш","i","I"],type:"key"},{code:"KeyO",values:["щ","Щ","o","O"],type:"key"},{code:"KeyP",values:["з","З","p","P"],type:"key"},{code:"BracketLeft",values:["х","Х","[","{"],type:"key"},{code:"BracketRight",values:["ъ","Ъ","]"," }"],type:"key"},{code:"Backslash",values:["\\","/","\\","|"],type:"key"},{code:"Delete",values:["DEL","DEL","DEL","DEL"],type:"key del"}],line3:[{code:"CapsLock",values:["CapsLock","CapsLock","CapsLock","CapsLock"],type:"key capslock"},{code:"KeyA",values:["ф","Ф","a","A"],type:"key"},{code:"KeyS",values:["ы","Ы","s","S"],type:"key"},{code:"KeyD",values:["в","В","d","D"],type:"key"},{code:"KeyF",values:["а","А","f","F"],type:"key"},{code:"KeyG",values:["п","П","g","G"],type:"key"},{code:"KeyH",values:["р","Р","h","H"],type:"key"},{code:"KeyJ",values:["о","О","j","J"],type:"key"},{code:"KeyK",values:["л","Л","k","K"],type:"key"},{code:"KeyL",values:["д","Д","l","L"],type:"key"},{code:"Semicolon",values:["ж","Ж",";",":"],type:"key"},{code:"Quote",values:["э","Э","'","'"],type:"key"},{code:"Enter",values:["ENTER","ENTER","ENTER","ENTER"],type:"key enter"}],line4:[{code:"ShiftLeft",values:["Shift","Shift","Shift","Shift"],type:"key shift"},{code:"KeyZ",values:["я","Я","z","Z"],type:"key"},{code:"KeyX",values:["ч","Ч","x","X"],type:"key"},{code:"KeyC",values:["с","С","c","C"],type:"key"},{code:"KeyV",values:["м","М","v","V"],type:"key"},{code:"KeyB",values:["и","И","b","B"],type:"key"},{code:"KeyN",values:["т","Т","n","N"],type:"key"},{code:"KeyM",values:["ь","Ь","m","M"],type:"key"},{code:"Comma",values:["б","Б",",","<"],type:"key"},{code:"Period",values:["ю","Ю",".",">"],type:"key"},{code:"Slash",values:[".",", ","/","?"],type:"key"},{code:"ArrowUp",values:["▲","▲","▲","▲"],type:"key arrow"},{code:"ShiftRight",values:["Shift","Shift","Shift","Shift"],type:"key shift-right"}],line5:[{code:"ControlLeft",values:["Ctrl","Ctrl","Ctrl","Ctrl"],type:"key ctrl"},{code:"MetaLeft",values:["Win","Win","Win","Win"],type:"key win"},{code:"AltLeft",values:["Alt","Alt","Alt","Alt"],type:"key alt"},{code:"Space",values:[" "," "," "," "],type:"key space"},{code:"AltRight",values:["Alt","Alt","Alt","Alt"],type:"key alt"},{code:"ArrowLeft",values:["◄","◄","◄","◄"],type:"key arrow"},{code:"ArrowDown",values:["▼","▼","▼","▼"],type:"key arrow"},{code:"ArrowRight",values:["►","►","►","►"],type:"key arrow"},{code:"ControlRight",values:["Ctrl","Ctrl","Ctrl","Ctrl"],type:"key ctrl"}]},t=new Set;let a=!1;class c{static init(){const t=localStorage.getItem("lang")?localStorage.getItem("lang"):"ru",a=document.createElement("div"),s=document.createElement("textarea"),o=document.createElement("div"),d=document.createElement("div"),l=document.createElement("div");d.className="case-notice",d.innerHTML="Change language shift + alt",l.className="windows-notice",l.innerHTML="Keyboard was crated on windows os",a.className="container",document.body.append(a),a.appendChild(d),a.appendChild(l),s.setAttribute("cols",50),s.setAttribute("rows",6),a.appendChild(s),o.className="keyboard",a.appendChild(o),c.renderKeyBoard(e,t,"down")}static renderKey(e,t="ru",a="down",c=""){let s;s="ru"===t&&"down"===a?0:"ru"===t&&"up"===a?1:"en"===t&&"down"===a?2:3;const o=document.createElement("div");return o.className=e.type,-1!==c.indexOf(e.code)&&(o.className+=" pressed"),o.innerHTML=`<span data-code="${e.code}" class='case ${a}'>${e.values[s]}</span>`,o}static renderKeyBoard(e,t,a,c=""){document.querySelector("div.keyboard").innerHTML="",Object.keys(e).forEach((s=>{const o=document.createElement("div");o.className="row",document.querySelector("div.keyboard").appendChild(o);for(let d=0;d<e[s].length;d+=1)o.appendChild(this.renderKey(e[s][d],t,a,c))}))}static updateTextAction(s){const o=document.querySelector("textarea"),d=localStorage.getItem("lang")?localStorage.getItem("lang"):"ru";let l,r,n,y;switch(s){case"ControlRight":case"ControlLeft":case"AltRight":case"AltLeft":case"MetaLeft":break;case"Delete":c.typeInTextarea("",o,-1);break;case"CapsLock":l=a?"down":"up",c.renderKeyBoard(e,d,l,s),a=!a;break;case"Tab":c.typeInTextarea("\t",o);break;case"Backspace":c.typeInTextarea("",o);break;case" ":c.typeInTextarea(" ",o);break;case"Enter":c.typeInTextarea("\n",o);break;case"ShiftLeft":case"ShiftRight":a?(r="down",n=`${s} CapsLock`):(r="up",n=s),c.renderKeyBoard(e,d,r,n);break;default:Object.keys(e).forEach((l=>{const r=e[l];for(let e=0;e<r.length;e+=1){const l=r[e];s===l.code&&(!t.has("ShiftLeft")&&!t.has("ShiftRight")&&a||(t.has("ShiftLeft")||t.has("ShiftRight"))&&!a?y="en"===d?l.values[3]:l.values[1]:(!t.has("ShiftLeft")&&!t.has("ShiftRight")&&!a||(t.has("ShiftLeft")||t.has("ShiftRight"))&&a)&&(y="en"===d?l.values[2]:l.values[0]),c.typeInTextarea(y,o))}}))}}static typeInTextarea(e,t,a=1){const c=t.selectionStart,s=t.selectionEnd,o=t.value;let d="",l="";if(0===e.length){const r=c===s&&1===a?1:0,n=c===s&&-1===a?1:0;d=o.substring(0,c-r),l=o.substring(s+n,o.length),t.value=d+l,c>=1?(t.selectionStart=c-r+e.length,t.selectionEnd=c-r+e.length):(t.selectionStart=0,t.selectionEnd=0)}else d=o.substring(0,c),l=o.substring(s,o.length),t.value=d+e+l,t.selectionStart=c+e.length,t.selectionEnd=c+e.length;t.focus()}static focusTextarea(){document.querySelector("textarea").focus()}}const s=new c;s.constructor.init(),"load keyup keydown".split(" ").forEach((e=>{window.addEventListener(e,c.focusTextarea,!1)})),window.addEventListener("keydown",(a=>{a.preventDefault();let c=localStorage.getItem("lang");t.add(a.code),(t.has("ShiftLeft")&&t.has("AltLeft")||t.has("ShiftRight")&&t.has("AltRight"))&&(c="en"===c?"ru":"en",localStorage.setItem("lang",c),s.constructor.renderKeyBoard(e,c,"down")),s.constructor.updateTextAction(a.code);const o=document.querySelector(`[data-code=${a.code}]`);if(o){const e=o.parentNode;-1===e.className.indexOf("pressed")&&(e.className+=" pressed")}})),document.addEventListener("keyup",(c=>{c.preventDefault();const o=localStorage.getItem("lang");if("ShiftLeft"===c.code||"ShiftRight"===c.code){const t=a?"up":"down",c=a?"Shift CapsLock":"Shift";s.constructor.renderKeyBoard(e,o,t,c)}if("ShiftLeft"!==c.code&&"ShiftRight"!==c.code&&(t.has("ShiftLeft")||t.has("ShiftRight"))?(t.clear(),t.add("ShiftLeft")):t.clear(),("CapsLock"===c.code||"LeftShift"===c.code)&&!a||"CapsLock"!==c.code){const e=document.querySelector(`[data-code=${c.code}]`);if(e){const t=e.parentNode;e.parentNode.className=t.className.replace(" pressed","")}}})),document.addEventListener("mousedown",(e=>{if(-1!==e.target.parentNode.className.indexOf("key")&&-1===e.target.className.indexOf("keyboard")&&-1===e.target.className.indexOf("row")){const t=e.target;if(t){const e=t.parentNode;-1===e.className.indexOf("pressed")&&(e.className+=" pressed")}s.constructor.updateTextAction(e.target.dataset.code)}})),document.addEventListener("mouseup",(c=>{c.preventDefault();const o=localStorage.getItem("lang");if(-1!==c.target.parentNode.className.indexOf("key")&&-1===c.target.className.indexOf("keyboard")&&-1===c.target.className.indexOf("row")){if("ShiftLeft"===c.target.dataset.code||"ShiftRight"===c.target.dataset.code){const t=a?"up":"down",d=a?`${c.target.dataset.code} CapsLock`:c.target.dataset.code;s.constructor.renderKeyBoard(e,o,t,d)}if("Shift"!==c.target.innerText&&t.has("Shift")?(t.clear(),t.add("Shift")):t.clear(),("CapsLock"===c.target.dataset.code||"LeftShift"===c.target.dataset.code)&&!a||"CapsLock"!==c.target.dataset.code){const e=document.querySelector(`[data-code=${c.target.dataset.code}]`),t=e.parentNode;e.parentNode.className=t.className.replace(" pressed","")}}}))})();